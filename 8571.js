"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8571],{98571:(N,v,i)=>{i.r(v),i.d(v,{ChoicesPrestationsModule:()=>z});var r=i(36895),x=i(24006),d=i(18779),M=i(99274),y=i(24586),b=i(53623),c=i(89770),p=i(75359),C=i(82064),g=i(7625),a=i(87545),I=i(2994),O=i(8929),h=i(21086),P=i(5254),t=i(94650),S=i(38629),F=i(28603),w=i(91125),j=i(78535);function k(n,s){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",6),t.\u0275\u0275listener("click",function(){const m=t.\u0275\u0275restoreView(e).$implicit,f=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(f.showSlots(m))}),t.\u0275\u0275elementStart(1,"div",7),t.\u0275\u0275element(2,"img",8),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",9)(5,"div",10)(6,"span"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(8,"div",11),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(10,"div",12),t.\u0275\u0275elementStart(11,"div",13),t.\u0275\u0275text(12,"\xe0 partir de "),t.\u0275\u0275elementStart(13,"span"),t.\u0275\u0275text(14),t.\u0275\u0275pipe(15,"price_format"),t.\u0275\u0275pipe(16,"async"),t.\u0275\u0275elementEnd()()()()}if(2&n){const e=s.$implicit,o=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate("src",e.mainPhoto?o.pathFiles+(null==e.mainPhoto?null:e.mainPhoto.contentUrl):o.pathFiles+t.\u0275\u0275pipeBind1(3,5,o.defaultImage$),t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",e.duration/60," min"),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.label),t.\u0275\u0275advance(1),t.\u0275\u0275property("innerHTML",e.description,t.\u0275\u0275sanitizeHtml),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(15,7,e.lowestPricePerParticipant,t.\u0275\u0275pipeBind1(16,10,o.clubCurrency$)))}}function E(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",4),t.\u0275\u0275template(1,k,17,12,"div",5),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}function $(n,s){if(1&n&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,E,2,1,"div",3),t.\u0275\u0275elementContainerEnd()),2&n){const e=s.ngIf,o=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&o.isLoaded)}}function A(n,s){1&n&&(t.\u0275\u0275elementStart(0,"div",14),t.\u0275\u0275element(1,"ion-skeleton-text",15)(2,"ion-skeleton-text",15)(3,"ion-skeleton-text",15),t.\u0275\u0275elementEnd())}const T=[{path:"",component:(()=>{class n{constructor(e,o,u,m,f,B){this.router=e,this.route=o,this.store=u,this.environmentService=m,this.activityService=f,this.clubStore=B,this.clubCurrency$=null,this.countActivities=0,this.defaultImage$=null,this.isLoaded=!1,this.prestations$=null,this.ngUnsubscribe=new O.xQ,this.defaultImage$=this.clubStore.select(C.oX).pipe((0,g.R)(this.ngUnsubscribe),(0,a.w)(l=>(this.club=l,console.log("club",l),(0,h.of)(this.club.photos&&this.club.photos[0]?this.club.photos[0].contentUrl:"")))),this.clubCurrency$=this.store.pipe((0,g.R)(this.ngUnsubscribe),(0,p.Ys)(C.NE),(0,a.w)(l=>(0,h.of)(l)))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngOnInit(){this.pathFiles=this.environmentService.getEnvFile().pathFiles,this.prestations$=this.route.queryParams.pipe((0,g.R)(this.ngUnsubscribe),(0,a.w)(e=>(console.log("from",e.from),console.log("clubId",e.clubId),console.log("activitySelectedId",e.activitySelectedId),console.log("categorySelectedId",e.categorySelectedId),null==e.activitySelectedId?(0,P.D)([[]]):(this.from=e.from,this.currentClubId=e.clubId,e.activitySelectedId&&(this.activitySelectedId=e.activitySelectedId),e.countActivities&&(this.countActivities=e.countActivities),e.categorySelectedId&&(this.categoryId=e.categorySelectedId),this.activityService.getPrestations(this.categoryId,this.activitySelectedId,this.currentClubId,this.from)))),(0,a.w)(e=>(console.log("prestations",e),this.isLoaded=!0,(0,P.D)([e.sort(this.orderPrestaByDuration)]))),(0,I.b)(e=>{0===e.length&&this.router.navigate(["home"])}))}showSlots(e){this.router.navigate(["booking-group-selection"],{queryParams:{prestation:JSON.stringify(e),clubId:this.currentClubId,id:"booking-group-selection",from:this.from,countActivities:this.countActivities,activitySelectedId:this.activitySelectedId,categorySelectedId:this.categoryId}})}backAction(){this.countActivities>1?this.router.navigate(["choices-activities"],{queryParams:{clubId:this.currentClubId,categoryBookId:this.categoryId,from:this.from}}):this.router.navigate(["home"])}orderPrestaByDuration(e,o){return e.duration<o.duration?-1:e.duration>o.duration?1:0}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(c.F0),t.\u0275\u0275directiveInject(c.gz),t.\u0275\u0275directiveInject(p.yh),t.\u0275\u0275directiveInject(S.L),t.\u0275\u0275directiveInject(F.M),t.\u0275\u0275directiveInject(p.yh))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-choices-prestations"]],decls:5,vars:7,consts:[[3,"isNav","title","subtitle","back"],[4,"ngIf"],["class","skeleton",4,"ngIf"],["class","list-prestations",4,"ngIf"],[1,"list-prestations"],["class","prestation-card",3,"click",4,"ngFor","ngForOf"],[1,"prestation-card",3,"click"],[1,"bloc-image"],[3,"src"],[1,"bloc-content"],[1,"time"],[1,"title"],[1,"description",3,"innerHTML"],[1,"price"],[1,"skeleton"],["animated","true"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"app-default-header",0),t.\u0275\u0275listener("back",function(){return o.backAction()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"ion-content"),t.\u0275\u0275template(2,$,2,1,"ng-container",1),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275template(4,A,4,0,"div",2),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("isNav",!1)("title","book_session")("subtitle",""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(3,5,o.prestations$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!o.isLoaded))},dependencies:[r.NgForOf,r.NgIf,d.IonContent,d.IonSkeletonText,w.C,r.AsyncPipe,j.E],styles:[".list-prestations[_ngcontent-%COMP%]{display:inline;flex-direction:column;padding-top:0}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]{display:inline-flex;margin:25px 7px 7px;width:calc(100% - 14px);max-width:400px;box-shadow:0 5px 4px #6e6e6e4d;flex-direction:row;padding:unset;min-height:185px;max-height:250px;background:#FFFFFF 0 0 no-repeat padding-box;border-radius:20px;position:relative}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:20px 0 0 20px;object-fit:cover;width:35%;height:100%;position:absolute;left:0;top:0;bottom:0}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]{padding:0;display:flex;flex-direction:column;inset:0 0 0 35%;height:100%;position:absolute;max-width:60%;margin:2rem auto;line-height:var(--lh)}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1.6rem}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:500;font-size:1.2rem;margin-top:10px;display:block;text-overflow:ellipsis;word-wrap:break-word;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;max-height:20%}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:unset!important}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-bottom:10px}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#e7ecf0;color:#415363;font-size:1.4rem;padding:4px 8px;border-radius:20px;font-weight:900}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{position:absolute;right:15px;bottom:22px;width:100%;text-align:right;font-size:1.7rem}.list-prestations[_ngcontent-%COMP%]   .prestation-card[_ngcontent-%COMP%]   .bloc-content[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.skeleton[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;margin-top:10px;align-items:center}.skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:90%;height:150px;border-radius:20px;margin-top:20px}"]}),n})()}];let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[c.Bz.forChild(T),c.Bz]}),n})(),z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[r.CommonModule,x.FormsModule,d.IonicModule,U,M.aw,y.D,b.M]}),n})()}}]);