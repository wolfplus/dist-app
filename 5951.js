"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5951],{85951:(Q,h,r)=>{r.r(h),r.d(h,{SearchClubPageModule:()=>R});var c=r(36895),f=r(24006),o=r(18779),u=r(89770),p=r(17713),e=r(94650),m=r(45307),b=r(75359),d=r(99274),v=r(38629),g=r(44921),S=r(71363),C=r(32559);function I(n,s){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-header",10),e.\u0275\u0275listener("filtersChange",function(){e.\u0275\u0275restoreView(t);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.reloadClub(!0))}),e.\u0275\u0275elementEnd()}if(2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("from",t.SearchType.CLUB)}}function y(n,s){1&n&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275element(1,"ion-skeleton-text",12)(2,"ion-skeleton-text",12)(3,"ion-skeleton-text",12),e.\u0275\u0275elementEnd())}function x(n,s){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"app-card-club",13),e.\u0275\u0275elementContainerEnd()),2&n){const t=s.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("club",t)}}function P(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15),e.\u0275\u0275element(2,"img",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",17)(4,"div"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"div"),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("src","assets/images/illustrations",null!=t.env&&t.env.useMb?"_"+t.env.marqueBlanche.pathName:"","/no_club.svg",e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,3,"club_no_results_with_filters")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,5,"increase_radius"))}}function E(n,s){if(1&n&&(e.\u0275\u0275elementStart(0,"div",14)(1,"div",15),e.\u0275\u0275element(2,"img",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",17)(4,"div"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()()),2&n){const t=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate1("src","assets/images/illustrations",null!=t.env&&t.env.useMb?"_"+t.env.marqueBlanche.pathName:"","/error.svg",e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,2,"search_club_error"))}}const M=[{path:"",component:(()=>{class n{constructor(t,l,i,a,z){this.clubService=t,this.store=l,this.route=i,this.translate=a,this.environmentService=z,this.title$=this.translate.get("find_a_complex"),this.clubsAreLoaded=!1,this.clubsLoadingError=!1,this.SearchType=p.S,this.env=this.environmentService.getEnvFile()}ngOnInit(){void 0!==this.route.snapshot.queryParams.city&&(this.searchParamType=p.i.CITY,this.searchParam=this.route.snapshot.queryParams.city),this.store.select("user").subscribe(t=>{t&&(this.user=t),this.load()})}reloadClub(t=!1,l=null){(this.clubsAreLoaded||!this.clubsAreLoaded&&this.clubsLoadingError)&&(this.subscriptionClub$&&this.subscriptionClub$.unsubscribe(),this.load(l,t))}returnRequest(t){return this.env.useMb?this.clubService.searchClub(10,!1,this.env.marqueBlanche.clubIds):t?this.clubService.searchClubNext(t):this.clubService.searchClub(10,!0)}load(t,l){this.skeletonShow=!0,this.clubsAreLoaded=!1,this.clubsLoadingError=!1,l&&(this.skeletonShow=!0,this.clubs=[]),this.subscriptionClub$=this.returnRequest(t).subscribe(i=>{i?i["hydra:member"]?(this.clubs=t?[...this.clubs,...i["hydra:member"]]:i["hydra:member"],this.clubs=this.clubs.map(a=>(void 0!==this.user&&(a.isPreferred=this.clubIsPreferred(this.user,a["@id"])),a)),this.clubsAreLoaded=!0,this.clubsLoadingError=!1,i["hydra:view"]["hydra:next"]?(this.hasNext=!0,this.nextPage=i["hydra:view"]["hydra:next"],this.infiniteScroll&&(this.infiniteScroll.complete(),this.infiniteScroll.disabled=!1)):(this.hasNext=!1,this.infiniteScroll&&(this.infiniteScroll.complete(),this.infiniteScroll.disabled=!0))):(this.clubsAreLoaded=!1,this.clubsLoadingError=!0):(this.clubs=[],this.clubsAreLoaded=!0,this.clubsLoadingError=!0),this.skeletonShow=!1})}clubIsPreferred(t,l){let i=!1;return t&&t.preferredClubs.length>0&&t.preferredClubs.includes(l)&&(i=!0),i}loadMoreData(){this.reloadClub(!1,this.nextPage)}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(m.I),e.\u0275\u0275directiveInject(b.yh),e.\u0275\u0275directiveInject(u.gz),e.\u0275\u0275directiveInject(d.sK),e.\u0275\u0275directiveInject(v.L))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-search-club"]],viewQuery:function(t,l){if(1&t&&e.\u0275\u0275viewQuery(o.IonInfiniteScroll,5),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(l.infiniteScroll=i.first)}},decls:17,vars:11,consts:[["color","'var(--app-dark-or-not-color)'"],["slot","start"],[1,"page-title"],["class","dspl-blck do-pt-1 do-pb-1 do-pl-2 do-pr-2",3,"from","filtersChange",4,"ngIf"],[3,"filtersChange"],["class","do-p-2",4,"ngIf"],[4,"ngFor","ngForOf"],["class","flex d-col jcfs aic do-p-2",4,"ngIf"],["threshold","50px",3,"ionInfinite"],["loadingSpinner","bubbles",3,"loadingText"],[1,"dspl-blck","do-pt-1","do-pb-1","do-pl-2","do-pr-2",3,"from","filtersChange"],[1,"do-p-2"],["animated","",1,"skeleton-club-card"],[1,"dspl-blck","w-100","do-p-2","mw-500",3,"club"],[1,"flex","d-col","jcfs","aic","do-p-2"],[1,"do-pt-2","do-pb-2","do-pl-7","do-pr-7"],["alt","",3,"src"],[1,"request-result-text","do-pt-2","do-pb-2"]],template:function(t,l){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.\u0275\u0275element(3,"ion-menu-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title",2),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"async"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,I,1,1,"app-header",3),e.\u0275\u0275elementStart(8,"app-filters-booking",4),e.\u0275\u0275listener("filtersChange",function(){return l.reloadClub(!0)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"ion-content"),e.\u0275\u0275template(10,y,4,0,"div",5),e.\u0275\u0275template(11,x,2,1,"ng-container",6),e.\u0275\u0275template(12,P,10,7,"div",7),e.\u0275\u0275template(13,E,7,4,"div",7),e.\u0275\u0275elementStart(14,"ion-infinite-scroll",8),e.\u0275\u0275listener("ionInfinite",function(){return l.loadMoreData()}),e.\u0275\u0275element(15,"ion-infinite-scroll-content",9),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(6,7,l.title$)," "),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!l.env.useMb),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",l.skeletonShow),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",l.clubs),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===(null==l.clubs?null:l.clubs.length)&&!0===l.clubsAreLoaded&&!1===l.clubsLoadingError),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",l.clubsLoadingError),e.\u0275\u0275advance(2),e.\u0275\u0275propertyInterpolate("loadingText",e.\u0275\u0275pipeBind1(16,9,"loading_more_clubs")))},dependencies:[c.NgForOf,c.NgIf,o.IonButtons,o.IonContent,o.IonHeader,o.IonInfiniteScroll,o.IonInfiniteScrollContent,o.IonMenuButton,o.IonSkeletonText,o.IonTitle,o.IonToolbar,g.O,S.N,C.G,c.AsyncPipe,d.X$],styles:[".logo-1[_ngcontent-%COMP%]{margin-bottom:35vh}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[u.Bz.forChild(M),u.Bz]}),n})();var T=r(10866),B=r(18883),j=r(6758),N=r(22107),A=r(14442),F=r(41418),O=r(89843),$=r(2138);let R=(()=>{class n{constructor(t){this.translate=t}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(d.sK))},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.CommonModule,f.FormsModule,o.IonicModule,d.aw,L,T.CalendarModule,B.n,j.h,N.Q,A.K,F.O,O.V,$.O]}),n})()}}]);