"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[729],{30729:(U,v,n)=>{n.r(v),n.d(v,{ChoicesActivitiesModule:()=>L});var r=n(36895),p=n(24006),a=n(18779),f=n(99274),C=n(24586),x=n(53623),c=n(89770),g=n(22328),y=n(8929),u=n(92198),I=n(43489);function m(){return i=>i.lift(new b)}class b{call(o,e){return e.subscribe(new A(o))}}class A extends I.L{constructor(o){super(o),this.hasPrev=!1}_next(o){let e;this.hasPrev?e=[this.prev,o]:this.hasPrev=!0,this.prev=o,e&&this.destination.next(e)}}var M=n(7625),P=n(87545),S=n(2994),t=n(94650),O=n(75359),k=n(28603),F=n(38629),j=n(91125);function w(i,o){if(1&i){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",5),t.\u0275\u0275listener("click",function(){const d=t.\u0275\u0275restoreView(e).$implicit,h=t.\u0275\u0275nextContext(3);return t.\u0275\u0275resetView(h.actionChoice(d))}),t.\u0275\u0275elementStart(1,"div",6),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd()()}if(2&i){const e=o.$implicit,s=t.\u0275\u0275nextContext(3);t.\u0275\u0275styleMap("background-image: url("+s.pathFiles+(null==e.photo?null:e.photo.contentUrl)+"); background-size: cover;"),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(e.name)}}function B(i,o){if(1&i&&(t.\u0275\u0275elementStart(0,"div",3),t.\u0275\u0275template(1,w,3,3,"div",4),t.\u0275\u0275elementEnd()),2&i){const e=t.\u0275\u0275nextContext().ngIf;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",e)}}function N(i,o){if(1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275template(1,B,2,1,"div",2),t.\u0275\u0275elementContainerEnd()),2&i){const e=o.ngIf,s=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",e&&s.isLoaded)}}function R(i,o){1&i&&(t.\u0275\u0275elementStart(0,"div")(1,"div",7),t.\u0275\u0275element(2,"ion-skeleton-text",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(3,"div",7),t.\u0275\u0275element(4,"ion-skeleton-text",8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"div",7),t.\u0275\u0275element(6,"ion-skeleton-text",8),t.\u0275\u0275elementEnd()())}const T=[{path:"",component:(()=>{class i{constructor(e,s,l,d,h){this.store=e,this.route=s,this.activityService=l,this.router=d,this.environmentService=h,this.activities$=null,this.isLoaded=!1,this.countActivities=0,this.ngUnsubscribe=new y.xQ}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngOnInit(){this.router.events.pipe((0,u.h)(e=>e instanceof c.R9),m()).subscribe(e=>{console.log(e,"events <====")}),this.activities$=this.route.queryParams.pipe((0,M.R)(this.ngUnsubscribe),(0,P.w)(e=>(this.pathFiles=this.environmentService.getEnvFile().pathFiles,this.from=e.from,this.clubId=e.clubId,this.categoryBookId=e.categoryBookId,console.log("from",e.from),console.log("clubId",e.clubId),console.log("categoryBookId",e.categoryBookId),this.activityService.getActivitiesByCategory(this.categoryBookId,this.clubId))),(0,S.b)(e=>{console.log("activities",e),e&&(this.router.events.pipe((0,u.h)(s=>s instanceof c.R9),m()).subscribe(s=>{console.log(s,"events <===="),(s[0].urlAfterRedirects.includes("/select-booking")||s[0].urlAfterRedirects.includes("/booking-group-selection"))&&s[1].urlAfterRedirects.includes("choices-activities")&&1===e.length&&this.router.navigate(["home"])}),this.countActivities=e.length),this.isLoaded=!0}))}actionChoice(e){"sport"===this.from?this.showPlanning(e):this.showPrestations(e)}showPlanning(e){const s={keyFilter:"ACTIVITY",value:e.id,label:e.name,category:"PLAYGROUND"};this.store.dispatch(new g.BH),this.store.dispatch(new g.VD(s)),this.router.navigate(["select-booking"],{queryParams:{guid:JSON.stringify(this.clubId),name:null,from:this.from,activitySelectedId:JSON.stringify(e.id),categoryId:JSON.stringify(this.categoryBookId)}})}showPrestations(e){console.log(e,"\xe7a passe ici <===="),this.router.navigate(["choices-prestations"],{queryParams:{countActivities:this.countActivities,clubId:this.clubId,activitySelectedId:e.id,categorySelectedId:this.categoryBookId,from:this.from}})}backAction(){console.log("go to home"),this.router.navigate(["home"])}}return i.\u0275fac=function(e){return new(e||i)(t.\u0275\u0275directiveInject(O.yh),t.\u0275\u0275directiveInject(c.gz),t.\u0275\u0275directiveInject(k.M),t.\u0275\u0275directiveInject(c.F0),t.\u0275\u0275directiveInject(F.L))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-choices-activities"]],decls:5,vars:7,consts:[[3,"isNav","title","subtitle","back"],[4,"ngIf"],["class","list-activities",4,"ngIf"],[1,"list-activities"],["class","activity-card",3,"style","click",4,"ngFor","ngForOf"],[1,"activity-card",3,"click"],[1,"title"],[1,"skeleton"],["animated","true"]],template:function(e,s){1&e&&(t.\u0275\u0275elementStart(0,"app-default-header",0),t.\u0275\u0275listener("back",function(){return s.backAction()}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(1,"ion-content"),t.\u0275\u0275template(2,N,2,1,"ng-container",1),t.\u0275\u0275pipe(3,"async"),t.\u0275\u0275template(4,R,7,0,"div",1),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275property("isNav",!1)("title","select_activity")("subtitle",""),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",t.\u0275\u0275pipeBind1(3,5,s.activities$)),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",!s.isLoaded))},dependencies:[r.NgForOf,r.NgIf,a.IonContent,a.IonSkeletonText,j.C,r.AsyncPipe],styles:[".list-activities[_ngcontent-%COMP%]{display:inline;flex-direction:column;padding-top:0}.list-activities[_ngcontent-%COMP%]   .activity-card[_ngcontent-%COMP%]{background-size:cover;box-shadow:0 5px 4px #6e6e6e4d;object-fit:cover;display:inline-flex;flex-direction:row;align-items:center;padding:unset;min-height:85px;width:calc(100% - 20px);max-width:400px;max-height:250px;background:white no-repeat center;border-radius:10px;position:relative;margin:10px}.list-activities[_ngcontent-%COMP%]   .activity-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{border-radius:10px;background-color:#0000004d;color:#fff;text-align:center;font-weight:900;font-size:2.5rem;min-width:100%;min-height:inherit;max-height:100%;text-transform:uppercase;padding-top:25px}.skeleton[_ngcontent-%COMP%]{width:100%;height:100px;display:flex;justify-content:center;align-items:center;margin-top:20px;border-radius:10px}.skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{width:90%;height:100%}"]}),i})()}];let E=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[c.Bz.forChild(T),c.Bz]}),i})(),L=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.\u0275\u0275defineNgModule({type:i}),i.\u0275inj=t.\u0275\u0275defineInjector({imports:[r.CommonModule,p.FormsModule,a.IonicModule,E,f.aw,C.D,x.M]}),i})()}}]);